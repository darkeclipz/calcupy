<!DOCTYPE html> {% raw %}
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>MathPy</title>
    <link rel="shortcut icon" type="image/png" href="/static/favicon.ico"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/bootstrap.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="static/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>
<body>
    <div id="app">
        
        <div class="text-center">
            <h1>$\oint$ MathPy <small class="subtitle">Calculus powered graphical calculator</small></h1>
        </div>

        <div class="card border-primary mb-3">
            <div class="card-header">Input</div>
            <div class="card-body">
                <p class="card-text">Enter an expression to get started. Need help? Look at the <a href="https://github.com/darkeclipz/mathpy#usage" target="_new">usage</a> or <a href="https://github.com/darkeclipz/mathpy#examples" target="_new">examples</a>.</p>
                <input id="function" placeholder="Enter an expression: x + y" class="form-control" v-model.lazy="expression" v-on:change="parse"/>
            </div>
        </div>

        <div class="card text-white bg-danger mb-3" v-if="expression_error">
            <div class="card-header">Oh oh...</div>
            <div class="card-body">
                <p class="card-text" class="font-white">
                    There seems to be something wrong with your expression!
                    <ul>
                        <li>Is multiplication stated with *, i.e. 2*x*y?</li>
                        <li>Is the exponential function defined with exp(2) instead of e^2?</li>
                    </ul>
                </p>
            </div>
        </div>

        <div id="info" class="card border-secondary mb-3" v-if="parsed">
            <div class="card-header">Expression</div>
            <div class="card-body">
                <p class="card-text">The expression is parsed as <span id="expression">${{ expression_latex }}$</span><span v-if="variables.length > 0">, where
                    {{ variables.map(v => '$' + v + '$').join(', ')}} {{variables.length != 1 ? 'are variables' : 'is a variable'}}</span>. 
                    <span v-if="is_matrix">This is a ${{dimension[0]}} \times {{dimension[1]}}$ matrix.</span>
                    <span v-if="variables.length == 0">There is no action available.</span>
                </p>
            </div>
        </div>

        <div class="card border-secondary mb-3 output" v-if="plot_show">
            <div class="card-header">Plot</div>
            <div class="card-body">
                <div class="text-center" v-if="plot_base64">
                    <img id="plot" :src="plot_base64" v-bind:class="[ plot_base64 ? 'fade-in' : '' ]"/>
                </div>
                <div id="loader" class="progress" v-if="!plot_base64 && !plot_error" style="height: 24px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%"></div>
                </div>
                <div v-if="plot_error">Something went wrong while plotting:<br/><pre>{{plot_error}}</pre></span><br/>
                    <button v-if="variables.length == 1" class="btn btn-primary" v-on:click="plot" type="button" >Try again</button>
                </div>
                <div v-if="variables.length == 2">
                    <hr/>
                    <button class="btn btn-primary" v-on:click="plot" type="button">Surface</button>
                    <button class="btn btn-primary" v-on:click="cplot" type="button">Contour</button>
                    <button class="btn btn-primary" v-on:click="gplot" type="button">Gradient</button>
                </div>
            </div>
        </div>

        <div id="actions" class="card border-secondary mb-3" v-if="variables.length > 0">
            <div class="card-header">Actions</div>
            <div class="card-body">
                <p>The following actions are available for ${{expression_latex}}$:</p>
                <table class="table" v-if="variables.length > 0" style="margin-bottom: 0">
                    <tbody>
                        <tr v-if="variables.length > 0">
                            <td>Algebra</td>
                            <td>
                                <button type="button" class="btn btn-primary" v-on:click="simplify">Simplify</button>
                                <button type="button" class="btn btn-primary" v-on:click="expand(false)">Expand</button>
                                <button type="button" class="btn btn-primary" v-on:click="expand(true)">Expand trig</button>
                                <button type="button" class="btn btn-primary" v-on:click="factor">Factor</button>
                                <button v-if="!(is_equality || is_inequality)" type="button" class="btn btn-primary" v-on:click="factors">Factors</button>
                                <button v-if="is_equality || is_inequality" v-for="v in variables" type="button" class="btn btn-primary" v-on:click="solveFor(v)">Solve for ${{v}}$</button>
                            </td>
                        </tr>
                        <tr v-if="variables.length > 0 && !is_equality && !is_inequality">
                            <td style="width: 100px;">Calculus</td>
                            <td>
                                <button v-if="variables.length == 1" type="button" class="btn btn-primary" v-on:click="diff(variables[0])">$\textrm{d} / \textrm{d}{{variables[0]}}$</button>
                                <button v-if="variables.length == 1" type="button" class="btn btn-primary" v-on:click="diff2(variables[0])">$\textrm{d}^2 / \textrm{d}{{variables[0]}}^2$</button>
                                <button v-if="variables.length > 1" v-for="v in variables" type="button" class="btn btn-primary" v-on:click="diff(v)">$\partial / \partial {{ v }}$</button>
                                <button v-if="variables.length > 1" v-for="v in variables" type="button" class="btn btn-primary" v-on:click="diff2(v)">$\partial^2 / \partial {{ v }}^2$</button>
                                <button v-if="variables.length == 1" type="button" class="btn btn-primary" v-on:click="integrate(variables[0])">$\int$</button>
                                <button v-if="variables.length == 1" type="button" class="btn btn-primary" v-on:click="integrate(variables[0], '0', 'T')">$\int_0^T$</button>
                                <button v-if="variables.length == 1" type="button" class="btn btn-primary" v-on:click="integrate(variables[0], '-oo', 'oo')">$\int_{-\infty}^{+\infty}$</button>
                                <button v-if="variables.length > 1" type="button" class="btn btn-primary" v-on:click="grad">$\nabla f$</button>
                                <button v-if="variables.length == 2" type="button" class="btn btn-primary" v-on:click="hessian">Hessian</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card border-secondary mb-3 output" v-if="action_show">
            <div class="card-header">Result</div>
            <div class="card-body">
                <div v-if="action_out" id="action-result" v-bind:class="[ action_out ? 'fade-in' : '' ]" >
                    {{action_in}}
                    <hr/>
                    {{action_out}}
                </div>
                <div v-if="!action_out && !action_error">
                    <div id="loader" class="progress" style="height: 24px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%"></div>
                    </div>
                </div>
                <div v-if="action_error">
                    Something went wrong with the action:<br/>
                    <pre>{{action_error}}</pre>
                </div>
            </div>
        </div>

        <div class="text-center">
            <small><b>MathPy</b> Calculus powered graphical calculator</small>
        </div>
    </div>

    <script type="text/x-mathjax-config">
        // Use $ for inline equations.
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/javascript" src="static/http.js"></script>
    <script type="text/javascript" src="static/helpers.js"></script>
    <script type="text/javascript" src="static/app.js"></script>
</body>
</html>
{% endraw %}